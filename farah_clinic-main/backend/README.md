# نظام عيادة الدكتورة فرح الأسنان

نظام إدارة المرضى والتقسيط لعيادة الأسنان مبني بـ FastAPI و MongoDB.

## الميزات

### إدارة المرضى
- ✅ تسجيل مريض جديد مع المعلومات الأساسية
- ✅ عرض تفاصيل كل مريض
- ✅ تحديث بيانات المريض
- ✅ حذف مريض

### نظام التقسيط
- ✅ حساب الأقساط الشهرية تلقائياً
- ✅ تتبع المدفوعات والمبالغ المتبقية
- ✅ عرض تاريخ الدفعة القادمة

### نظام الإشعارات
- ✅ إشعارات المتأخرات التلقائية
- ✅ عرض تفاصيل المتأخرات (عدد الأيام، المبالغ، إلخ)
- ✅ إشعارات الدفعات القادمة

### البحث والفلترة
- ✅ البحث بالاسم أو رقم الهاتف
- ✅ فلترة المرضى المكتملين/غير المكتملين
- ✅ فلترة المتأخرات

## متطلبات التشغيل

- Python 3.8+
- MongoDB 4.0+

## التثبيت

1. تثبيت المتطلبات:
```bash
pip install -r requirements.txt
```

2. تشغيل MongoDB على المنفذ 27017 (افتراضي)

3. تشغيل التطبيق:
```bash
python main.py
```

## استخدام API

### إنشاء مريض جديد
```bash
POST /patients/
{
    "name": "أحمد محمد",
    "phone": "07701234567",
    "total_amount": 5000000,
    "installments_months": 24,
    "notes": "علاج أسنان"
}
```

### عرض جميع المرضى
```bash
GET /patients/
```

### البحث عن مريض
```bash
GET /patients/search?query=أحمد
```

### إنشاء دفعة جديدة
```bash
POST /patients/{patient_id}/payments
{
    "amount": 208333.33,
    "notes": "دفعة شهر أكتوبر"
}
```

### عرض المتأخرات
```bash
GET /patients/notifications/overdue
```

### عرض الدفعات القادمة
```bash
GET /patients/upcoming-payments?days_ahead=7
```

### إحصائيات المرضى
```bash
GET /patients/statistics/summary
```

## هيكل المشروع

```
backend/
├── main.py                 # الملف الرئيسي للتطبيق
├── models/
│   └── patient.py         # نماذج البيانات
├── schemas/
│   └── patient.py         # سكيمات Pydantic
├── services/
│   ├── database.py        # خدمة قاعدة البيانات
│   └── patient_service.py # خدمة المرضى
├── router/
│   └── patient_router.py  # معالجات API
└── utils/
    ├── date_utils.py      # معالجات التاريخ
    └── notification_utils.py # معالجات الإشعارات
```

## الوثائق

- **API Documentation**: http://localhost:8000/docs
- **Alternative Docs**: http://localhost:8000/redoc

## ملاحظات مهمة

- جميع التواريخ والأوقات تُحسب بتوقيت بغداد (GMT+3)
- الإشعارات تُنشأ تلقائياً للمدفوعات المتأخرة يوم واحد على الأقل
- المبالغ تُحسب بالدينار العراقي
- رقم الهاتف يجب أن يكون 10-15 رقم

## التطوير المستقبلي

- [ ] نظام المصادقة والمستخدمين
- [ ] تقارير PDF للفواتير
- [ ] تكامل مع WhatsApp للإشعارات
- [ ] واجهة مستخدم ويب
- [ ] نسخ احتياطي تلقائي لقاعدة البيانات
